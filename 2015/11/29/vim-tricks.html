<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="wb:webmaster" content="dc02577f62789d9d" />

  <title>VIM 学习笔记</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/investment/css/main.css">
  <link rel="canonical" href="http://ericluo.github.io/investment/2015/11/29/vim-tricks.html">
  <link rel="alternate" type="application/rss+xml" title="桃李不言" href="http://ericluo.github.io/investment/feed.xml">
</head>


  <body class="wrap">

    <header role="banner">
    <div class="grid">
        <div class="unit golden-small">
            <h1>
                <a class="site-title" href="/investment/">桃李不言</a>
            </h1>
        </div>
        <nav class="main-nav unit golden-large">
            <ul>
  <li class="">
    <a href="/">Home</a>
  </li>
  <li class="">
    <a href="/backups/">历史资料</a>
  </li>
</ul>

        </nav>
    </div>
</header>


    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

    <div class="grid">
        <div class="unit four-fifths">
            <header class="post-header">
                <h1 class="post-title" itemprop="name headline">VIM 学习笔记</h1>
                <p class="post-meta">
                <time datetime="2015-11-29T00:00:00+08:00" itemprop="datePublished">
                    Nov 29, 2015
                </time>
                
                 / <span class="post-tag">  </span> 
                </p>
            </header>

            <div class="post-content" itemprop="articleBody">
                <ul id="markdown-toc">
  <li><a href="#vim" id="markdown-toc-vim">VIM应用技巧</a>    <ul>
      <li><a href="#vim-" id="markdown-toc-vim-">Vim 输入法切换</a></li>
    </ul>
  </li>
  <li><a href="#modes" id="markdown-toc-modes">Modes</a>    <ul>
      <li><a href="#normal-mode" id="markdown-toc-normal-mode">Normal mode</a>        <ul>
          <li><a href="#vims-operator-commands" id="markdown-toc-vims-operator-commands">Vim’s Operator commands</a></li>
        </ul>
      </li>
      <li><a href="#insert-mode" id="markdown-toc-insert-mode">Insert mode</a></li>
      <li><a href="#visual-mode" id="markdown-toc-visual-mode">Visual mode</a></li>
      <li><a href="#command-lineex-mode" id="markdown-toc-command-lineex-mode">Command-Line(Ex) Mode</a>        <ul>
          <li><a href="#ex-commands" id="markdown-toc-ex-commands">Ex Commands</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#registers" id="markdown-toc-registers">Registers</a></li>
  <li><a href="#patterns" id="markdown-toc-patterns">Patterns</a>    <ul>
      <li><a href="#substitution" id="markdown-toc-substitution">Substitution</a></li>
      <li><a href="#global-commands" id="markdown-toc-global-commands">Global Commands</a></li>
    </ul>
  </li>
  <li><a href="#tools" id="markdown-toc-tools">Tools</a>    <ul>
      <li><a href="#ctags" id="markdown-toc-ctags">ctags</a></li>
      <li><a href="#quickfix" id="markdown-toc-quickfix">quickfix</a></li>
      <li><a href="#grep" id="markdown-toc-grep">grep</a></li>
      <li><a href="#autocompletion" id="markdown-toc-autocompletion">autocompletion</a></li>
    </ul>
  </li>
</ul>

<hr />

<p><code class="highlighter-rouge">VIM</code> 的最佳使用原则是 <strong>执行、重复、回退</strong> ，在使用 <code class="highlighter-rouge">VIM</code> 的过程中，要时刻注意有没有应用这个原则了简化编辑工作的机会。</p>

<dl>
  <dt><code class="highlighter-rouge">Dot Formula</code></dt>
  <dd>One Keystroke to move, One Keystroke to Execute</dd>
</dl>

<table>
  <thead>
    <tr>
      <th>Intent</th>
      <th>Act</th>
      <th style="text-align: center">Repeat</th>
      <th style="text-align: center">Reverse</th>
      <th>mode</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Make a change</td>
      <td>{edit}</td>
      <td style="text-align: center">.</td>
      <td style="text-align: center">u</td>
      <td> </td>
    </tr>
    <tr>
      <td>Scan line for next character</td>
      <td>f{char}/t{char}</td>
      <td style="text-align: center">;</td>
      <td style="text-align: center">,</td>
      <td> </td>
    </tr>
    <tr>
      <td>Scan line for previous character</td>
      <td>F{char}/T{char}</td>
      <td style="text-align: center">;</td>
      <td style="text-align: center">,</td>
      <td> </td>
    </tr>
    <tr>
      <td>Scan document for next match</td>
      <td>/pattern<cr></cr></td>
      <td style="text-align: center">n</td>
      <td style="text-align: center">N</td>
      <td> </td>
    </tr>
    <tr>
      <td>Scan document for previous match</td>
      <td>?pattern<cr></cr></td>
      <td style="text-align: center">n</td>
      <td style="text-align: center">N</td>
      <td> </td>
    </tr>
    <tr>
      <td>Perform substitution</td>
      <td>:s/target/replacement</td>
      <td style="text-align: center">&amp;</td>
      <td style="text-align: center">u</td>
      <td> </td>
    </tr>
    <tr>
      <td>Execute a sequence of changes</td>
      <td>qx{changes}q</td>
      <td style="text-align: center">@x</td>
      <td style="text-align: center">u</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="vim">VIM应用技巧</h1>

<h2 id="vim-">Vim 输入法切换</h2>

<p>在插入模式的时候如果使用的是中文输入法，想回到正常模式，这时候按ESC是不管用的，因为键都让输入法捕获了。你必须先手动切换成英文输入法才能正常使用VIM的键盘命令。</p>

<p>加入下面这两行配置，可以让你简单地按ESC就回到正常模式，而不需要手动切换为英文输入法：</p>

<figure class="highlight"><pre><code class="language-vim" data-lang="vim"><span class="k">au</span> <span class="nb">InsertEnter</span> * <span class="k">set</span> noimdisable
<span class="k">au</span> <span class="nb">InsertLeave</span> * <span class="k">set</span> imdisable</code></pre></figure>

<p>注意：如果再进入插入模式会自动切换到正常模式之前的输入法。</p>

<h1 id="modes">Modes</h1>

<h2 id="normal-mode">Normal mode</h2>

<p><em>撤销</em>命令的粒度由从 <code class="highlighter-rouge">normal mode</code> 进入 <code class="highlighter-rouge">insert mode</code>，然后在恢复到 <code class="highlighter-rouge">Normal mode</code> 决定。期间对文档变更作为一个整体 (<code class="highlighter-rouge">chunk</code>) 。</p>

<p><strong>注意：如果在 <code class="highlighter-rouge">insert mode</code> 下，使用了上下左右的方向键移动光标位置，将视作退回了 <code class="highlighter-rouge">Normal mode</code> ，并使用 <code class="highlighter-rouge">h,j,k,l</code> 来移动。</strong></p>

<p>因此，在编辑过程中，应该尽可能按照思维粒度来决定返回 <code class="highlighter-rouge">Normal mode</code> 的时机，从而一次思维过程可以作为一个可撤销单元。</p>

<h3 id="vims-operator-commands">Vim’s Operator commands</h3>

<table>
  <thead>
    <tr>
      <th>Trigger</th>
      <th>Effect</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>c</td>
      <td>Change</td>
    </tr>
    <tr>
      <td>d</td>
      <td>Delete</td>
    </tr>
    <tr>
      <td>y</td>
      <td>Yank into register</td>
    </tr>
    <tr>
      <td>g~</td>
      <td>Swap case</td>
    </tr>
    <tr>
      <td>gu</td>
      <td>Make lowercase</td>
    </tr>
    <tr>
      <td>gU</td>
      <td>Make uppercase</td>
    </tr>
    <tr>
      <td>&gt;</td>
      <td>Shift right</td>
    </tr>
    <tr>
      <td>&lt;</td>
      <td>Shift left</td>
    </tr>
    <tr>
      <td>=</td>
      <td>Autoindent</td>
    </tr>
    <tr>
      <td>!</td>
      <td>Filter {motion} lines through an external program</td>
    </tr>
  </tbody>
</table>

<h4 id="vims-grammer">Vim’s Grammer</h4>

<blockquote>
  <p>Operator + Motion = Action</p>
</blockquote>

<blockquote>
  <p>When an operator is invoked in duplicate, it acts upon the current line.</p>
</blockquote>

<h2 id="insert-mode">Insert mode</h2>

<table>
  <thead>
    <tr>
      <th>Keystrokes</th>
      <th>Effect</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-h&gt;</code></td>
      <td>Delete back one character (backspace)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-w&gt;</code></td>
      <td>Delete back one word</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-u&gt;</code></td>
      <td>Delete back to start of line</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-r&gt;{register}</code></td>
      <td>Paste text from {register}</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-r&gt;=</code></td>
      <td>Paste return from expression register</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-v&gt;{123}</code></td>
      <td>Insert character by decimal code</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-v&gt;u{1234}</code></td>
      <td>Insert character by hexadecimal code</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-v&gt;{nondigit}</code></td>
      <td>Insert nondigit literally</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-k&gt;{char1}{char2}</code></td>
      <td>Insert character represented by {char1}{char2} digraph</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">&lt;Esc&gt;</code></td>
      <td>Switch to Normal mode</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-[&gt;</code></td>
      <td>Switch to Normal mode</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">&lt;C-o&gt;</code></td>
      <td>Switch to Insert Normal mode<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></td>
    </tr>
  </tbody>
</table>

<h2 id="visual-mode">Visual mode</h2>

<h2 id="command-lineex-mode">Command-Line(Ex) Mode</h2>

<blockquote>
  <p>Ex commands Strike Far and Wide</p>
</blockquote>

<p>在该模式中可以使用类似于 <code class="highlighter-rouge">bash</code> 中的快捷键进行命令的编辑。主要可以使用的命令有：</p>

<table>
  <thead>
    <tr>
      <th>Keystrokes</th>
      <th>Effect</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>C-u</td>
      <td>撤销全行内容</td>
    </tr>
    <tr>
      <td>C-w</td>
      <td>撤销前一个单词</td>
    </tr>
    <tr>
      <td>C-a</td>
      <td>跳到行首</td>
    </tr>
    <tr>
      <td>C-e</td>
      <td>跳到行尾</td>
    </tr>
    <tr>
      <td>C-r{register}</td>
      <td>插入寄存器内容</td>
    </tr>
    <tr>
      <td>C-r C-w</td>
      <td>插入当前位置单词</td>
    </tr>
  </tbody>
</table>

<h3 id="ex-commands">Ex Commands</h3>

<table>
  <thead>
    <tr>
      <th>Keystrokes</th>
      <th>Effect</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>:[range]delete [x]</td>
      <td>delete lines into register x</td>
    </tr>
    <tr>
      <td>:[range]yank [x]</td>
      <td>yank specified lines [into register x]</td>
    </tr>
    <tr>
      <td>:[line]put [x]</td>
      <td>put the text from register x after the specified line</td>
    </tr>
    <tr>
      <td>:[range]copy {address}</td>
      <td>copy specified lines to below the line specified by {address}</td>
    </tr>
    <tr>
      <td>:[range]move {address}</td>
      <td>move specified lines to below the line specified by {address}</td>
    </tr>
    <tr>
      <td>:[range]join</td>
      <td>join the specified lines</td>
    </tr>
    <tr>
      <td>:[range]normal {commands}</td>
      <td>execute Normal mode {commands} with {string} on each specified line</td>
    </tr>
    <tr>
      <td>:[range]substitute/{pattern}/{string}/[flags]</td>
      <td>replace occurrences of {pattern} with {string} on each specified line</td>
    </tr>
    <tr>
      <td>:[range]global/{pattern}/[cmd]</td>
      <td>execute the Ex command [cmd] on all specified lines where the {pattern} matches</td>
    </tr>
  </tbody>
</table>

<p>使用 <code class="highlighter-rouge">q:</code> 可以进入 <code class="highlighter-rouge">Command line window</code> 模式。</p>

<h1 id="registers">Registers</h1>

<table>
  <thead>
    <tr>
      <th>name</th>
      <th>register</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Unnamed Registers</td>
      <td>””</td>
    </tr>
    <tr>
      <td>Yank Registers</td>
      <td>“0</td>
    </tr>
    <tr>
      <td>Named Registers</td>
      <td>“a - “z</td>
    </tr>
    <tr>
      <td>Black Hole Register</td>
      <td>“_</td>
    </tr>
    <tr>
      <td>Expression register</td>
      <td>”=</td>
    </tr>
    <tr>
      <td>Search register</td>
      <td>”/</td>
    </tr>
    <tr>
      <td>System Clipboard</td>
      <td>”+</td>
    </tr>
  </tbody>
</table>

<h1 id="patterns">Patterns</h1>

<h2 id="substitution">Substitution</h2>

<h2 id="global-commands">Global Commands</h2>

<h1 id="tools">Tools</h1>

<h2 id="ctags">ctags</h2>

<h2 id="quickfix">quickfix</h2>

<blockquote>
  <p>At any given moment, there can be only one quickfix list, but we can create as many location lists as we want.
Location list is bound to the currently active window, quickfix list is available throughtout Vim.</p>
</blockquote>

<ul>
  <li>
    <dl>
      <dt>Quickfix List</dt>
      <dd>:make, :grep, :vimgrep use the quickfix list</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>Location List</dt>
      <dd>:lmake, :lgrep, :lvimgrep use the location list</dd>
    </dl>
  </li>
</ul>

<h2 id="grep">grep</h2>

<h2 id="autocompletion">autocompletion</h2>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>用于在 <code class="highlighter-rouge">Insert mode</code> 下临时性地调用一次 <code class="highlighter-rouge">Normal mode</code> 命令，然后在返回 <code class="highlighter-rouge">Insert mode</code>。 <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

            </div>

            <div>
                <div class="share-page">
    Share this on &rarr;
    <a href="https://facebook.com/sharer.php?u=http://ericluo.github.io/2015/11/29/vim-tricks.html" rel="nofollow" target="_blank" title="Share on Facebook">Facebook</a>
    <a href="https://plus.google.com/share?url=http://ericluo.github.io/2015/11/29/vim-tricks.html" rel="nofollow" target="_blank" title="Share on Google+">Google+</a>
</div>

            </div>
        </div>

        <div id="tag-cloud">
            <a href="/investment/tag/%E5%86%99%E4%BD%9C.html" class="set-1">写作</a> <a href="/investment/tag/%E6%8A%95%E8%B5%84.html" class="set-5">投资</a>
        </div>
    </div>
</article>


    <footer role="contentinfo">

    <div class="grid">

        <div class="unit one-third">
            <h2 class="footer-heading">桃李不言</h2>
        </div>

        <div class="unit one-third align-center">
            <a href="mailto:3944134@qq.com">3944134@qq.com</a>
            |
            <a href="http://xueqiu.com/sailor">雪球</a>
            |
            <a href="http://weibo.com/1769275090">微博</a>
        </div>

        <div class="unit one-third">
            <p>客观平和，坚持自我
</p>
        </div>
    </div>

</div>
</footer>


  </body>

</html>
